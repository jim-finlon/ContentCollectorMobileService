!function(){"use strict";function n(n,e,t,a,o,i){function r(){s().then(p).then(c)}function s(){var e=n.defer();return o.then(function(n){"undefined"==typeof _.contains&&(_.contains=_.includes),"undefined"==typeof _.object&&(_.object=_.zipObject),n.visualRefresh=!0,f.maps=n,f.map={center:{latitude:0,longitude:0},zoom:17,pan:!0,options:{disableDefaultUI:!1,mapTypeId:n.MapTypeId.ROADMAP},bounds:new f.maps.LatLngBounds(new f.maps.LatLng(1,(-1)),new f.maps.LatLng(.1,(-.1)))},i.promise().then(function(n){f.mapInstance=n[0].map}),f.mapOptions={mapTypeId:f.maps.MapTypeId.ROADMAP,zoom:12},e.resolve()}),e.promise}function p(){var e=n.defer();return a.getLocations().then(function(n){f.locations=n.data,e.resolve(n)}),e.promise}function c(){t(l,2e3)}function l(){if(f.mapInstance){u(f.mapMarkers),f.mapMarkers=[];var n=[],a=[];angular.forEach(f.locations,function(e,t){function o(n){f.maps.event.addListener(n,"click",function(){f.currentInfoWindow&&f.currentInfoWindow.close(),f.currentInfoWindow=r,r.open(f.mapInstance,n)})}var i=new f.maps.Marker({id:t,map:f.mapInstance,position:new f.maps.LatLng(e.latitude,e.longitude),title:e.name,zIndex:1}),r=new f.maps.InfoWindow({content:d(e)});n[t]=i,a[t]=r,o(i)});var o=new f.maps.LatLngBounds;angular.forEach(n,function(n){o.extend(n.getPosition())}),f.mapInstance.setCenter(o.getCenter()),f.mapInstance.fitBounds(o),e.safeApply(function(){f.mapMarkers=n,f.toolTips=a}),t(function(){f.maps.event.trigger(f.mapInstance,"resize")},100)}else console.log("async map load did not complete in time")}function u(n){angular.forEach(n,function(n){n.setMap(null)})}function d(n){var e="";return e+='<div style="min-height: 65px"><table style="width: 200px; padding: 2px; border-spacing: 2px"><tr>',e+='<td style="width: 200px; padding-left: 5px">',e+="<strong>"+n.name+"</strong><br />",e+=n.geolocation+"<br />",e+="Lat: "+n.latitude+"<br /> Lon: "+n.longitude+"<br /> Alt: "+n.altitude+"<br />",e+="</td></tr></table></div>"}var f=this;f.locations=[],f.map={},f.maps=null,f.mapInstance=null,f.bounds={},f.mapMarker={},f.mapMarkers=[],f.toolTips=[],r(),e.safeApply=function(n){var e=this.$root.$$phase;"$apply"==e||"$digest"==e?n&&"function"==typeof n&&n():this.$apply(n)}}angular.module("app",["locationModule","uiGmapgoogle-maps"]),angular.module("app").config(["uiGmapGoogleMapApiProvider",function(n){n.configure({key:"AIzaSyChoRWbL0V1ouvBeAbeIfwq3a5DwiH8KKA"})}]);var e="home";angular.module("app").controller(e,n),n.$inject=["$q","$scope","$timeout","locationRepository","uiGmapGoogleMapApi","uiGmapIsReady"]}(),$(function(){$("#side-menu").metisMenu()}),$(function(){$(window).bind("load resize",function(){var n=50,e=this.window.innerWidth>0?this.window.innerWidth:this.screen.width;e<768?($("div.navbar-collapse").addClass("collapse"),n=100):$("div.navbar-collapse").removeClass("collapse");var t=(this.window.innerHeight>0?this.window.innerHeight:this.screen.height)-1;t-=n,t<1&&(t=1),t>n&&$("#page-wrapper").css("min-height",t+"px")});for(var n=window.location,e=$("ul.nav a").filter(function(){return this.href==n}).addClass("active").parent();;){if(!e.is("li"))break;e=e.parent().addClass("in").parent()}}),function(){"use strict";var n=angular.module("locationModule",[]);n.factory("locationRepository",["$http",function(n){function e(){return n.get("http://contentcollector.azurewebsites.net/tables/location",{headers:{"ZUMO-API-VERSION":"2.0.0"}})}return{getLocations:e}}])}();